!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=39)}({39:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41);r(document).ready(function(){var e=new(function(){return function(){this.started=!1,this.interval_count=0}}());if(!i())return;var t=wp.data.select("core/editor");wp.data.subscribe(function(){var r,i=t.getCurrentPost();if(i&&i!=={}){e.first_modified||(e.first_modified=i.modified);var o=i.modified,a=i.status,s=i.id;s&&(e.post_id=s);var d=null===(r=document.querySelector("[name=send_wonderpush_notification]"))||void 0===r?void 0:r.checked,u=o!==e.first_modified,l="publish"===a;!e.started&&u&&d&&l&&(e.interval=setInterval(n,3e3),e.started=!0)}});var n=function(){if(window.ajaxurl&&e.post_id){var t={action:"wonderpush_get_post_metadata",post_id:e.post_id};window.WonderPushNotice&&(t.nonce=window.WonderPushNotice.nonce),r.get(window.ajaxurl,t,function(e){var t=e.info_message,n=e.error_message;window.DEBUG_MODE&&console.log(e),t&&o(t),n&&a(n),(t||n)&&s()}),e.interval_count>20&&s(),e.interval_count+=1}},o=function(e){wp.data.dispatch("core/notices").createNotice("info",e,{id:"wonderpush-notice",isDismissible:!0})},a=function(e){wp.data.dispatch("core/notices").createNotice("error",e,{isDismissible:!0,id:"wonderpush-error"})},s=function(){e.interval&&clearInterval(e.interval),e.interval=void 0,e.interval_count=0,e.started=!1,e.first_modified=void 0}});var i=function(){return!!("undefined"!=typeof wp&&wp&&wp.data&&wp.data.select("core/editor"))||("undefined"!=typeof wp&&wp?wp.data?wp.data.select("core/editor")||'wp.data.select("core/editor")':"wp.data":"wp",!1)},o=function(){function e(e){var t,n,i,o,a,s=this;this.element=e,this.audienceRadios=[],this.utmParametersSummary=document.createElement("div"),this.showUtmParameters=!1,this.utmParametersSummary.className="wonderpush_utm_summary",this.utmParametersContainer=e.querySelector(".wonderpush_utm_parameters")||void 0,this.allContainer=e.querySelector("div.wonderpush_all")||void 0,this.segmentsContainer=e.querySelector("div.wonderpush_segments")||void 0,this.tagsContainer=e.querySelector("div.wonderpush_tags")||void 0;var d=null===(t=this.tagsContainer)||void 0===t?void 0:t.querySelector("#wonderpush_target_tags");this.tagsSelect2=d?r(d).select2({width:"inherit",placeholder:"Select tag(s)"}):void 0,this.allContent=(null===(n=this.allContainer)||void 0===n?void 0:n.querySelector("div.wonderpush_target"))||void 0,this.segmentsContent=(null===(i=this.segmentsContainer)||void 0===i?void 0:i.querySelector("div.wonderpush_target"))||void 0;var u=null===(o=this.segmentsContainer)||void 0===o?void 0:o.querySelector("#wonderpush_target_segment_ids");this.segmentsSelect2=u?r(u).select2({width:"inherit",placeholder:"Select segment(s)"}):void 0,this.tagsContent=(null===(a=this.tagsContainer)||void 0===a?void 0:a.querySelector("div.wonderpush_target"))||void 0,this.audienceRadios=Array.from(e.querySelectorAll("input[name=wonderpush_audience]")),this.audienceRadios.forEach(function(e){return e.addEventListener("change",function(){return s.updateAudience()})}),this.updateAudience(),this.updateUtmParams()}return e.prototype.updateUtmParams=function(){var e,t=this;if(this.utmParametersContainer)if(this.showUtmParameters)null===(e=this.utmParametersSummary.parentNode)||void 0===e||e.removeChild(this.utmParametersSummary),this.utmParametersContainer.style.display="";else{this.utmParametersContainer.style.display="none";var n=this.utmParametersContainer.parentNode;if(!n)return void console.warn("UTM container not attached");n.insertBefore(this.utmParametersSummary,this.utmParametersContainer),this.utmParametersSummary.innerHTML="";for(var r={},i=0,o=Array.from(this.utmParametersContainer.querySelectorAll("input[type=text]"));i<o.length;i++){var a=o[i],s=a.name.replace("wonderpush_","");a.value&&(r[s]=a.value)}if(Object.keys(r).length){var d=document.createElement("code");d.innerText=Object.entries(r).map(function(e){return e[0]+": "+e[1]}).join(", "),this.utmParametersSummary.appendChild(d)}else this.utmParametersSummary.innerText="No utm parameter configured";var u=document.createElement("a");u.href="#",u.innerText="Configure",u.className="wonderpush_configure",u.addEventListener("click",function(e){e.preventDefault(),t.showUtmParameters=!0,t.updateUtmParams()}),this.utmParametersSummary.appendChild(u)}},e.prototype.updateAudience=function(){var e,t,n,r,i,o,a,s,d;switch(null===(t=null===(e=this.segmentsContent)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.segmentsContent),null===(r=null===(n=this.tagsContent)||void 0===n?void 0:n.parentNode)||void 0===r||r.removeChild(this.tagsContent),null===(o=null===(i=this.allContent)||void 0===i?void 0:i.parentNode)||void 0===o||o.removeChild(this.allContent),this.audience){case"all":this.allContent&&(null===(a=this.allContainer)||void 0===a||a.appendChild(this.allContent));break;case"segments":this.segmentsContent&&(null===(s=this.segmentsContainer)||void 0===s||s.appendChild(this.segmentsContent));break;case"tags":this.tagsContent&&(null===(d=this.tagsContainer)||void 0===d||d.appendChild(this.tagsContent))}},Object.defineProperty(e.prototype,"audience",{get:function(){for(var e=0,t=this.audienceRadios;e<t.length;e++){var n=t[e];if(n.checked&&["all","tags","segments"].indexOf(n.value)>=0)return n.value}return"all"},enumerable:!1,configurable:!0}),e}();window.addEventListener("load",function(){var e=document.querySelector("div#wonderpush_editor");e instanceof HTMLDivElement&&new o(e)})},41:function(e,t){e.exports=jQuery}});